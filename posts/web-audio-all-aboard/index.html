<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Audio – All Aboard!</title>
    <meta name="description" content="Technical Consulting">
    <link rel="stylesheet" href="/bocoup_lume/pagefind/pagefind-ui.css"><link rel="stylesheet" href="/bocoup_lume/styles.css">
    <link rel="alternate" href="/bocoup_lume/feed.xml" type="application/atom+xml" title="Bocoup">
    <link rel="alternate" href="/bocoup_lume/feed.json" type="application/json" title="Bocoup">
  <script type="text/javascript" src="/bocoup_lume/pagefind/pagefind-ui.js"></script><script type="text/javascript">window.addEventListener('DOMContentLoaded', () => { new PagefindUI({"element":"#search","showImages":false,"showEmptyFilters":true,"resetStyles":false,"bundlePath":"/bocoup_lume/pagefind/","baseUrl":"/bocoup_lume/"}); });</script></head>
  <body>
    <nav class="navbar">
      <a href="/bocoup_lume/" class="navbar-home">
        <strong>Bocoup</strong>
      </a>

      <ul class="navbar-links">
      </ul>

      <div class="navbar-search">
        <div id="search"></div>
      </div>
    </nav>

    <main class="body-post">
      <article class="post" data-pagefind-body="">
  <div class="post-header">
    <h1 class="post-title">Web Audio – All Aboard!</h1>

    <nav class="post-tags">
    
      <a href="/bocoup_lume/tags/audio/" class="tag">audio</a>
    
      <a href="/bocoup_lume/tags/firefox/" class="tag">firefox</a>
    
      <a href="/bocoup_lume/tags/multitouch/" class="tag">multitouch</a>
    
      <a href="/bocoup_lume/tags/performance/" class="tag">performance</a>
    
      <a href="/bocoup_lume/tags/svg/" class="tag">svg</a>
    
      <a href="/bocoup_lume/tags/visualization/" class="tag">visualization</a>
    
    </nav>

    <time class="post-date" datetime="2022-11-22 19:17:22">
      November 22nd, 2022
    </time>
  </div>

  <div class="post-body">
    
    <p>In this post I will talk about <a href="https://web.archive.org/web/20101013232840/https://wiki.mozilla.org/Audio_Data_API">Mozilla’s Web Audio Data API</a>. I will cover where we have come from, demonstrate some of the incredible results that have already been achieved; I will talk about why audio in the browser is so important, take a look at where we are headed and explore some of the ways in which we hope to reach our goals.</p>
<h3><em>Buckle Up!</em></h3>
<p>It is difficult to know just where to begin. The ground that has been covered by so few, in so short a time is truly remarkable. Web audio has literally jolted into motion like the cars on a white-knuckle fair ground ride. Audio in the browser has gone from a simple tag in a web page for playing sound, to a usable Data API allowing JavaScript to read and write audio between the browser and the sound card.</p>
<p>This means being able to read and visualize audio data from a song in the web-page without any plug-ins like Flash. It means generating music and speech based on dynamic web-site content. It means blowing the doors of research, creativity and accessibility wide open, for everyone!</p>
<p>For now, this strange and sudden velocity remains an experimental experience for those who dare ride the crazy roller-coaster of innovation, but the potential creative and technical energy building as we climb to the top is becoming harder and harder to ignore.</p>
<h1>HISTORY</h1>
<h3><em>Out of The Blue</em></h3>
<p>At the true beginning of this creative branch, stands a man commissioned to sound the drum beat “Upgrade the Web”. <a href="https://web.archive.org/web/20101013232840/http://www.0xdeadbeef.com/weblog/">Chris Blizzard</a> is very good at connecting people. It was his ability to inspire and align people against a common goal, that helped form the vibrant Processing.js community; a highly charged super-community throwing out wide arching sparks innovation like furious Tesla Coil of creativity.</p>
<p>Back in early 2009, before the public release of the <audio> tag, Chris began encouraging me to get involved in with audio discussions on Bugzilla. The right conversations were being had, but an important condition for the beginning of life was sadly missing. I will call this condition… “Champion Energy”</audio></p>
<p>Champion Energy is the unworldly force generated by a person who has the stubborn tenacity to latch on to an idea, and to push on it so hard that it breaks the very fabric of reality, allowing them to displace the future, and pull it ever closer towards them. In the Processing.js Channel, we respectfully refer to this force as “<a href="https://web.archive.org/web/20101013232840/http://vocamus.net/dave/">David Humprey</a>“.</p>
<h3><em>The Right Kind of Wrong</em></h3>
<p>Dave Humphrey is the wrong man for the job. He clearly knows precious little about audio and music theory. But anyone who’s knows Dave will confirm his unspoken mantra: ‘What is not, exists to be conquered.’ visa-vi ‘The gaps are there to be filled.’</p>
<p>It was with this spirit, in the Winter of 2009, that Dave insisted, <em>“Al, I am going to make audio data available to JavaScript in the Browser”</em>.<br>
Doubtedly I responded, <em>“Hmmmm, OK. I think it is going to be a lot harder than you anticipate Dave.”</em></p>
<p>Within a couple of weeks, Dave had me downloading patches for Firefox and building versions of Minefield that spat out audio data into the console. Not only was I taken aback… I was excited. Very, very, veeeeery excited!</p>
<p>Having studied music technology at College and spent the first phase of my career working in music and video studios mastering audio and writing score for documentaries, I had always dreamed of having fine control over raw audio in a language as simple as JavaScript. In two weeks, some guy who knew very little about audio, magically produced an array of seemingly random numbers. <a href="https://web.archive.org/web/20101013232840/http://weblog.bocoup.com/reading-the-audio-stream-from-firefox-3-7">I was quickly able to confirm</a> these numbers were <strong>exactly</strong> the right kind of data we needed!</p>
<h1>The World’s First Everything</h1>
<p><iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/HLkOgy1yO14" frameborder="0" allowfullscreen=""></iframe></p>
<p>It was not long before things became fun. We were already creating Canvas visualizations using audio data, and by early January Dave had opened the door to generating audio signals that could be played out over the sound card. I used the colloective code thus far, to create the <a href="https://web.archive.org/web/20101013232840/http://weblog.bocoup.com/worlds-1st-html-audio-generated-music">World’s first JavaScript generated music</a>, completing the synthesis cycle, taking math and turning it into music in the browser, without any plug-ins.</p>
<p>The convergence of technical skill and creative talent in the Processing.js channel gave rise to a swarm of intense activity. We rapidly built against the new functionality, visualizing audio from video streams, analyzing the frequency of audio with fast fourier transforms and building subtractive audio synthesizers -to mention but a few.</p>
<p>Not only were the right people and the right skills converging, the right technologies were also merging. Recent web technologies like JIT, WebGL, Canvas and SVG Filters were multiplying the awesomeness of our online applications quicker than a 70′s arcade power-up. After the pre-release success of WebGL, adding audio data to the web page is to many (this <em>many</em> being Flash developers I have encountered while giving talks on HTML5), the final nail in the coffin for black-box browser technologies like Flash.</p>
<h1>Hacks, Meets, Demos &amp; The W3C</h1>
<p>We recently held the first <a href="https://web.archive.org/web/20101013232840/http://bocoup.eventwax.com/processing-for-the-open-web-panel">Processing.js Panel</a> in Boston at <a href="https://web.archive.org/web/20101013232840/http://loft.bocoup.com/">The Bocoup Loft</a>. Ben Fry (Processing), John Resig (jQuery), Chris Blizzard(Mozilla), David Humphrey(Seneca) and Corban Brook (Processing.js) discussed the Processing.js project at length, and the fun did not end there. Mozilla stuck around with a few of their graphics boffins, who worked with the Processing.js Team from Seneca, to fix performance bugs we discovered while working on the project. To see a browser vendor like Mozilla get behind an open source library and reap the rewards was greatly edifying and demonstrated an important method for sustainability in the open source movement.</p>
<p>We were fortunate to have <a href="https://web.archive.org/web/20101013232840/http://schepers.cc/">Doug Schepers</a> from the W3C <a href="https://web.archive.org/web/20101013232840/http://www.w3.org/Graphics/SVG/">SVG Working Group</a> at the Processing.js Panel 2010. We demo-ed the work thus far to Doug. Immediately he recognized the creative potential and accessibility use-cases for audio data in the browser, Doug began to set the processes in motion for an <a href="https://web.archive.org/web/20101013232840/http://www.w3.org/2010/04/audio/audio-incubator-charter.html">Audio Data Incubator Group</a> at the W3C.</p>
<p>I am writing this post as I sit in the lobby of the Marriot hotel in North Carolina with David Humphrey, Kathy Leung and Andor Salga from <a href="https://web.archive.org/web/20101013232840/http://zenit.senecac.on.ca/wiki/index.php/Main_Page">Seneca</a>. Yesterday we gave talks on WebGL and the Audio Data API at The <a href="https://web.archive.org/web/20101013232840/http://weblog.bocoup.com/%3Cbr%20/%3Ehttp://www2010.org/www/program/developers-track/">www2010 conference</a>.</p>
<p>It was great to see the response to our work. The smiles and nods as we demonstrated JavaScript Audio Software Development were not only encouraging, but served as an indicator that people understood the concept and approved of the use-cases for Audio Data access in the browser. I want to show you some video captures of the live demos we shared.</p>
<h1>DEMO FRIDAY!</h1>
<h3><em>HTML5 3D FFT Visualization with CubicVR</em></h3>
<p><a href="http://twitter.com/ccliffe">Charles Cliffe</a> created this excellent WebGL FFT visualization using the CubicVR 3D Engine which he first wrote in C, and then ported to JavaScript…because he’s the man. It reads the audio data without any plug ins using Mozilla’s Audio Data API and converts the data to… PURE AWESOME!</p>
<h3><em>WebGL HTML5 JavaScript Beat Detection</em></h3>
<p><iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/dym4DqpJuDk" frameborder="0" allowfullscreen=""></iframe></p>
<p>As if somehow his first swing at awesomeness didn’t hit home hard enough, <a href="http://twitter.com/ccliffe">Charles Cliffe</a> went and added beat detection in JavaScript. Watch JavaScript lock in to the beat and turn the WebGL cogs in time with the music. Yes… the web is <em>this</em> awesome!</p>
<h3><em>Nihilogic’s HTML5 Audio-Data Visualizations</em></h3>
<p>Truly stunning canvas-based audio-data Winamp style visualizations created by Jacob Seidelin using our audio data API. See: <a href="https://web.archive.org/web/20101013232840/http://blog.nihilogic.dk/2010/04/html5-audio-visualizations.html">http://blog.nihilogic.dk/2010/04/html5-audio-visualizations.html</a> for more details.</p>
<h3><em>HTML5 Audio with Realtime Javascript Low Pass Filter</em></h3>
<p><iframe loading="lazy" src="https://player.vimeo.com/video/11335434" width="500" height="375" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></p>
<p>An excellent demonstration by <a href="http://twitter.com/f1lt3r">Corban Brook</a>, showing how JavaScript can be used to filter audio signals. The JavaScript reads from first (muted) audio tag, passes through a low pass IIR Filter (also implemented in Javascript), and then Writes processed signal to a second audio tag, all in real time, frame by frame… SLICK!</p>
<h3><em>In-browser Synthesizer and Sequencer with Envelope and Filter control</em></h3>
<p><iframe loading="lazy" src="https://player.vimeo.com/video/8873165" width="500" height="450" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></p>
<p>Corban’s In-Browser Sequencer demo uses his new JavaScript DSP library ‘PJSAudio’ (<a href="http://github.com/corbanbrook/pjsaudio">http://github.com/corbanbrook/pjsaudio</a>) to generate tones and sequence musical patterns in the open web. The PJSAudio Oscillator module generates a signal which is sent through a Low Pass Filter and ADSR Envelope and then written to the computer’s sound card through the HTML5 audio tag. <strong>Is there no stopping this guy!?</strong></p>
<h3><em>“Bloop” An HTML5 Instrument inspired by <a href="http://itunes.apple.com/us/app/bloom/id292792586?mt=8">Brian Eno’s Bloom App</a>. for the iPhone</em></h3>
<p>This is a demonstration of a simple touch screen video instrument I made with Processing.js. The instrument is built using the Firefox web browser with no plug ins, inspired by Brian Eno’s Bloom application available on iPhone. I used Firefox’s Audio Data API to generate tones with JavaScript and push them to the audio stream of the sound card. The key of the music changes at set intervals and creates a loop buffer, to repeat the notes just played.</p>
<p>Thanks to NotMasterYet &amp; <a href="https://web.archive.org/web/20101013232840/http://twitter.com/corban">Corban Brook</a> for crucial tweaks to my buffering code, you guys rock!</p>
<h3><em>HTML5 Touch-screen Video Instrument in Firefox</em></h3>
<p>My demo would not have been complete without the ability to create sound by touch. In this example I am rendering black squares on a white background so the touch points are visible on the low-quality web cam. Apart from the styles, the code is the same as the example above. I am using the HP TouchSmart TX2 with <a href="https://web.archive.org/web/20101013232840/http://felipe.wordpress.com/2009/08/21/sneak-peak-on-multitouch-events/">Felipe Gomes’ Firefox Touch API</a>.</p>
<h3><em>Are We There Yet?</em></h3>
<p><strong>YES!</strong> The demos above are not the work of a commercially funded research group. The work has been done by members of the Processing.js community in the spare minutes and the small hours. We have traveled all the way from an idea to an API in a matter of months. We have proven that web technology is ready to deliver audio data access. We have experienced the steady influx of the audio-visual community to the Processing.js chanel, a community who’s thirst for simpler APIs that can break cross-platform boundaires is being quenched by the open web.</p>
<p>If this is as exciting to you as it is to me, and you would like to visualize audio data and/or generate audio signals in Firefox, connect to server <a href="irc://irc.mozilla.org/processing.js">irc.mozilla.org</a> and join the #Processing.js channel. You can read more about Mozilla’s Audio Data API at: <a href="https://web.archive.org/web/20101013232840/http://wiki.mozilla.org/Audio_Data_API">http://wiki.mozilla.org/Audio_Data_API</a>.</p>
<h1>WHY AN AUDIO DATA API IS SO IMPORTANT</h1>
<p>The current web applications specification is broad, and clearly powerful. But it will never be complete without a greater granularity of control over audio. And here is why…</p>
<p>The web is not just about the sharring of scientific papers. The web is more than just the commercialization of information into subscription services. The web is bigger than email. The web is more than the sum of its technical parts. It attempts to capture and engage all of our human knowledge, spirit and creativity; in all of its ugliness, in all of its beauty and in all of its functionality.</p>
<p>A web browser that allows for such fine granular control over video graphics using tools like Canvas and WebGL, yet provides no equivelent control over audio data, is a web browser that is very lopsided. In human terms, web browsers have always been <strong>very lopsided</strong>. They reflect a specialized facet of ‘the human requirement’. This is unfortunate as the web can potentially encompass a far more balanced and expressive set of features, encapsulating our humanity. Fortunately the modern movement towards a more human browser, appears to have gained significant velocity… in the right direction. (though many may disagree)</p>
<h3><em>Audio Data Use-Cases</em></h3>
<p>Allowing for finer control over audio data unlocks previously hidden potential for the browser. The number of great use-cases for an Audio Data API in the browser are simply staggering. I threw together some ideas into the following use-case list. I am sure there are a few obvious cases I have missed and many creative cases I would not have dreamed up in a million years. If you have ideas I can add to this list, I would love to hear from you!</p>
<p><strong>Music / Sound Effects</strong></p>
<ul>
<li>Synthesis</li>
<li>Composition, Sequencing</li>
<li>Analysis</li>
<li>Games</li>
<li>Signal Processing</li>
<li>Audio Effects, Reverb, EQ</li>
<li>Surround Sound Data Audition </li>
<li>Web-DJing</li>
<li>Teaching</li>
<li>Web-Instruments</li>
<li>Online Music Editing</li>
<li>Website Ambience</li>
<li>Radio Streaming</li>
<li>Wave-tracing, bouncing audio off 3D objects for simulations and games</li>
<li>Remote AJAX Musical Performance Groups</li>
</ul>
<p><strong>Video Processing</strong></p>
<ul>
<li>Speech to text sub-titles</li>
<li>Frequency spectrography</li>
<li>Vocal frequency enhancement</li>
<li>AV Mixing</li>
<li>Rear speaker surround signal processing (I will demo this in another post)</li>
<li>De-ess, limit, compress poorly mastered content on the fly</li>
<li>Adjust levels of cinematic sequences compensating for the listener’s environment</li>
<li>Noise Removal</li>
</ul>
<p><strong>Accessibility</strong></p>
<ul>
<li>Text to Speech Synthesis</li>
<li>Vocal help in web applications</li>
<li>Exporting Wikipedia pages to MP3 for external device playback</li>
<li>Speech recognition from a microphone source</li>
<li>Rendering 3D Worlds to audio for the blind</li>
<li>Audible cues for rolling over web forms</li>
<li>Speech &amp; audio based games</li>
<li>Event cues such as DOMContentLoaded, page loading, etc</li>
<li>Audible IDEs for visually impaired developers</li>
<li>Accessible error handling events</li>
</ul>
<h3><em>Implementation Time-Window</em></h3>
<p>You have seen in the demos above that JavaScript is fast enough to handle real-time frequency analysis, quick enough to generate music on the fly and can be combined with technologies like WebGL without melting your CPU. Web technology is ready.</p>
<p>Let that really sink in for a minute.</p>
<blockquote>
<p>“Web technology is ready.”</p>
</blockquote>
<ul>
<li>Hardware devices are already more than powerfull enough to process audio data.</li>
<li>Browser software is smart enough to JIT compile code, bringing JavaScript performance close to C++.</li>
<li>Internet users seek web services that leverage the latest web-application APIs in the browser, because they work without any downloads or installs.</li>
<li>Commercial enterprises are realizing the financial advantage of developing applications for a web platform, a platform on which the APIs are well documented, view-source-able and quick to implement.</li>
<li>Browser vendors are taking standards seriously and paying attention to innovative open source communities.</li>
</ul>
<p>While discussing <a href="https://web.archive.org/web/20101013232840/https://wiki.mozilla.org/Audio_Data_API">The Audio Data API</a>, Doug Schepers pointed out that the business of specification and implementation involves focusing one’s energy in the right <em>time</em> as well as in the right place. At present, the opportunity to innovate, specify and implement are aided, at least in part, by community and financial pressure on the browser vendor to implement standards.</p>
<p>The outcome of WWWW2 (The second world wide web war, Microsoft vs. Netscape) was a steep decline in standards implementation. Why? Because Microsoft had nobody with which to compete. After-all, it makes no business sense to expend resources by adhering to an alien standards-body, when Microsoft’s users were mute and their competition burnt to ashes.</p>
<p>Fortunately Microsoft are not in that position today. Thank God! They have mechanisms in place to listen to their users, they care about standardizing their browser and they are delivering higher standards of work with each iteration. I mean… come on… they are actually iterating now!!</p>
<p>This shifting force of competition between browser vendors, sends technoclysmic combobulations of awesome-source-energy pulsating and colliding through the fiberous nervous system of the common electronic consciousness. What I mean to say is: the competition between browser vendors to ‘make the grade’ fosters innovation across the web.</p>
<p>But as Doug rightly points out, this may not always be the case. What happens if another ‘for-profit’ giant gains almost complete dominance over the browser market? The thought is sobering.</p>
<p>And so…</p>
<p>I believe this is a crucial point in the history of the web. I only hope the developer community will remain focused, work hard and finish what it started. The current web applications specification is powerful. But it is incomplete without the public ability to read and write audio data in the browser.</p>
<blockquote>
<p>The technology is ready,</p>
<p>The community is thirsty.</p>
</blockquote>
<h1>GOALS</h1>
<p>As web developers, what are the technical requirements we are looking for from an audio application interface in the browser? The simple API we have drafted is powerful enough to support the full range of audio applications in the web. The API is extremely light-weight, making browser implementation relatively trivial.</p>
<p>So far there are five basic components that make up the Audio Data API.</p>
<ol>
<li>Reading from an audio source</li>
<li>Writing to an audio source</li>
<li>Reading the buffer state</li>
<li>DOM event model</li>
<li>C++ FFT Spectrum Analysis</li>
</ol>
<p>A more technical description of the API can be found: <a href="https://web.archive.org/web/20101013232840/https://wiki.mozilla.org/Audio_Data_API">here</a>, including the methods used to access audio data, as well as download-able builds of Firefox+audio (these will not over-write your existing Firefox installations). A list of tests and demonstrations to get you started can also be found at the bottom of the page.</p>
<h3><em>Holding The Door Open</em></h3>
<p>As a community of open source hackers, we want to keep both the initiative and the API 100% open. This openness will allow the implementers of every browser vendor to be ‘on the same page’. We would do well to learn from the mistakes of the web’s past and work closely together, not as members of warring browsers tribes, but as a community of audio enthusiasts. We welcome developers working on the source of Chrome, Safari, Opera, Internet Explorer and Firefox to get involved, experiment, share results and work towards creating a rock-solid API that will enrich the web for many years to come.</p>
<p>If we are going to develop one web-standard together… the right way, let it be the inherently collaborative domain of audio, music, and speech synthesis.</p>
<h3><em>With A Little Help From Our Friends</em></h3>
<p>Audio innovation on the web needs to be about more than just an army of web geeks. We need musicians, audio engineers, game developers and accessibility pioneers to join forces with web developers and drive this effort forward. A strong community possessing a broad range of specializations will help to define existing best practices in audio software and will help keep the momentum of the Audio Data API from getting caught in the red tape of standardization before it is ready to launch.</p>
<h1>A CALL TO ACTION</h1>
<p>Not only is this space important, it is exciting. The Audio Data API is largely un-chartered territory with hundreds of ‘firsts’ unclaimed. So many APIs, libraries and software applications remain un-written. If you are interested in bringing audio data to the web, why are you waiting for someone else to get there before you?!</p>
<p><strong>Performers</strong><br>
Come develop the first web based networked musical instruments. Start remote music groups who’s members can tour in different cities.</p>
<p><strong>Audio Engineers</strong><br>
Your expertise is crucial in making the web sound right in the subtle levels that most people can not even hear.</p>
<p><strong>Software Engineers &amp; Game Designers</strong><br>
Use your existing programming knowledge of best audio practices and let your creativity flow in the exciting experimental world of online audio synthesis and web based games.</p>
<p><strong>DJs, Vijays</strong><br>
Come and create visualizations and web-based music mixers that run content from your servers at home. Stop rushing to set up, just plug in your laptop, click on your web browser and jam!</p>
<p><strong>Web Designers</strong><br>
Create beautiful sound-scapes to capture the attention of your users. Add subtle sound effects to give your web site an un-unprecedented level of depth.</p>
<blockquote>
<p>The technology is ready,</p>
<p>The community is thirsty.</p>
</blockquote>
<h1>THE FUTURE OF WEB AUDIO @ THE BOCOUP LOFT</h1>
<p>Bocoup is holding an event called <a href="https://web.archive.org/web/20101013232840/http://bocoup.eventwax.com/the-future-of-web-audio">The Future of Web Audio</a> at the Bocoup Loft on the 12th of May from 6:30pm to 10pm. We will be serving free pizza and beer. This event is aimed at audio software developers, game developers, audio engineers and whoever else is interested in the Audio Data API. We will be demonstrating the progress so far with live code examples and will open up the floor for discussions. Come voice your opinions on audio development, give suggestions, heckle your creative ideas and words of wisdom that will be invaluable to the implementation of audio standards in the web for years to come.</p>
<p>We look forward to seeing you!</p>
<p>– F1LT3R (Alistair G. MacDonald)</p>

  </div>
</article>

<hr>

<nav class="post-navigation">
  <ul>
    <li>
      ← Previous: <a href="/bocoup_lume/posts/javascript-web-workers-from-basics-to-jquery-hive-part-i/" rel="prev">Javascript Web Workers: From Basics to jQuery.Hive</a>
    </li>
    
    <li>
      <strong>Next: <a href="/bocoup_lume/posts/css-svg-filters-unaccessible-from-elem-style-xlink-href/" rel="next">CSS SVG-Filters Elem.style &amp;#038; xlink:href=&amp;#8221;url(#id)&amp;#8221; #fail</a> →</strong>
    </li>
    
  </ul>
</nav>
    </main>

    <footer></footer>

    <!-- Current page: /posts/web-audio-all-aboard/ -->
  

</body></html>